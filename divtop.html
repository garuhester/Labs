<!DOCTYPE html>
<html>

<head>
    <title></title>
    <style type="text/css">
    #text {
        background: #ffffff;
        width: 100%;
        padding: 30px;
        box-sizing: border-box;
    }
    </style>
</head>

<body style="margin:0px;">
    <div style="height:300px;background:lightcoral"></div>
    <div id="text">div顶部吸附</div>
    <div style="height:2000px;background:lightblue"></div>
    <script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript">
    $(function() {
        var ie6 = document.all;
        var dv = $('#text');
        var st;
        dv.attr('otop', dv.offset().top); //存储原来的距离顶部的距离
        console.log(dv.offset().top);
        console.log(document.getElementById('text').offsetTop);
        $(window).scroll(function() {
            st = Math.max(document.body.scrollTop || document.documentElement.scrollTop);
            if (st > parseInt(dv.attr('otop'))) {
                if (ie6) { //IE6不支持fixed属性，所以只能靠设置position为absolute和top实现此效果
                    dv.css({ position: 'absolute', top: st });
                } else if (dv.css('position') != 'fixed') {
                    dv.css({ 'position': 'fixed', top: 0 });
                }
            } else if (dv.css('position') != 'static') {
                dv.css({ 'position': 'static' });
            }
        });
    });
    </script>
</body>

</html>